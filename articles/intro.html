<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="ecositer">
<title>General Introduction to ecositer • ecositer</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="General Introduction to ecositer">
<meta property="og:description" content="ecositer">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ecositer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/cleaning_veg_data.html">cleaning_veg_data</a>
    <a class="dropdown-item" href="../articles/intro.html">General Introduction to ecositer</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/natearoe/ecositer/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="intro_files/htmlwidgets-1.6.3/htmlwidgets.js"></script><script src="intro_files/plotly-binding-4.10.3/plotly.js"></script><script src="intro_files/typedarray-0.1/typedarray.min.js"></script><link href="intro_files/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="intro_files/crosstalk-1.2.1/js/crosstalk.min.js"></script><link href="intro_files/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="intro_files/plotly-main-2.11.1/plotly-latest.min.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>General Introduction to ecositer</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/natearoe/ecositer/blob/HEAD/vignettes/intro.Rmd" class="external-link"><code>vignettes/intro.Rmd</code></a></small>
      <div class="d-none name"><code>intro.Rmd</code></div>
    </div>

    
    
<p>This vignette is intended to document basic functionality of the
<em>ecositer</em> package. This package is in development and should not
be expected to perform in a robust manner across different datasets. At
this point, the functionality here is a demonstration of workflows for
dealing with NRCS ecological site data. I hope that future development
of this package and standardization of NASIS population will make it
more applicable.</p>
<p>Library</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/natearoe/ecositer" class="external-link">ecositer</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ncss-tech.github.io/soilDB/" class="external-link">soilDB</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://emf-creaf.github.io/indicspecies/" class="external-link">indicspecies</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org" class="external-link">stringr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://plotly-r.com" class="external-link">plotly</a></span><span class="op">)</span></span></code></pre></div>
<p>Begin by querying NASIS so that you have a selected set containing
vegetation data. In this vignette, we will query for vegetation data in
Sequoia and Kings Canyon National Parks, soil survey area CA792.
Detailed instructions for making this query can be found <a href="https://natearoe.github.io/ESS_FAQs/ecosites.html#plotveg" class="external-link">here</a>.</p>
<p>Now that we have data in our selected set, we will introduce the
first <em>ecositer</em> function. <code><a href="../reference/vegStaticNASIS.html">vegStaticNASIS()</a></code> takes a
snapshot of your NASIS selected set and saves it in a local SQLite
database. It is referred to as “static” because it does not change. This
means that regardless of what is in your selected set in the future, you
can refer to this static NASIS database using a local file path on your
harddrive. Rather than switching between different queries and clearing
your selected set in NASIS, you will likely find it useful to save a few
specific selected sets locally on your computer. The functionality of
creating static NASIS selected sets is borrowed from <a href="https://github.com/ncss-tech/soilDB" class="external-link">soilDB</a>.
<code><a href="../reference/vegStaticNASIS.html">vegStaticNASIS()</a></code> is a special case designed specifically
for vegetation data.</p>
<p>The only argument in this function is <code>output_path</code> the
local file path where you want to save your static NASIS database.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ecositer</span><span class="fu">::</span><span class="fu"><a href="../reference/vegStaticNASIS.html">vegStaticNASIS</a></span><span class="op">(</span>output_path <span class="op">=</span> <span class="st">"C:/Users/Nathan.Roe/Documents/SEKI/CA792_veg.sqlite"</span><span class="op">)</span></span></code></pre></div>
<p>Now we can format our vegetation data into a more useful format</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">CA792_veg_formatted</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/formatted_veg_df.html">formatted_veg_df</a></span><span class="op">(</span>static_location <span class="op">=</span> <span class="st">"C:/Users/Nathan.Roe/Documents/SEKI/CA792_veg.sqlite"</span><span class="op">)</span></span></code></pre></div>
<p>Let’s start off by looking at how many pedons and vegplots we have
for each ecosite</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">numb_plots</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/number_plots_by_site.html">number_plots_by_site</a></span><span class="op">(</span>static_location <span class="op">=</span> <span class="st">"C:/Users/Nathan.Roe/Documents/SEKI/CA792_veg.sqlite"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">numb_plots</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; Warning: non-standard notation in Munsell value, use getClosestMunsellChip()</span></span>
<span><span class="co">#&gt; Warning: Horizon top depths contain NA! Check depth logic with</span></span>
<span><span class="co">#&gt; aqp::checkHzDepthLogic()</span></span>
<span><span class="co">#&gt; Warning: Horizon bottom depths contain NA! Check depth logic with</span></span>
<span><span class="co">#&gt; aqp::checkHzDepthLogic()</span></span>
<span><span class="co">#&gt; Warning: cannot set `phiid` as unique pedon horizon key - `NA` introduced by</span></span>
<span><span class="co">#&gt; fill=TRUE</span></span></code></pre>
<p>Here is a look at a portion of the data we have assembled.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">CA792_veg_formatted</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">primarydatacollector</span>, <span class="op">-</span> <span class="va">plantnatvernm</span>, <span class="op">-</span><span class="va">akfieldecositeid</span>,</span>
<span>                                                   <span class="op">-</span><span class="va">vegplotid</span>, <span class="op">-</span><span class="va">vegplotiid</span>, <span class="op">-</span><span class="va">plantsym</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;   siteiid   ecositeid                       plantsciname</span></span>
<span><span class="co">#&gt; 1  541059 R022AB006CA                    Carex filifolia</span></span>
<span><span class="co">#&gt; 2  541059 R022AB006CA                              Carex</span></span>
<span><span class="co">#&gt; 3  541059 R022AB006CA Cistanthe umbellata var. umbellata</span></span>
<span><span class="co">#&gt; 4  541059 R022AB006CA        Cryptogramma acrostichoides</span></span>
<span><span class="co">#&gt; 5  541059 R022AB006CA                          Danthonia</span></span>
<span><span class="co">#&gt; 6  541059 R022AB006CA                   Elymus elymoides</span></span>
<span><span class="co">#&gt;                                              akstratumcoverclass</span></span>
<span><span class="co">#&gt; 1 medium graminoid between about 10 and 60 cm (4 and 24 in) tall</span></span>
<span><span class="co">#&gt; 2 medium graminoid between about 10 and 60 cm (4 and 24 in) tall</span></span>
<span><span class="co">#&gt; 3      medium forb between about 10 and 60 cm (4 and 24 in) tall</span></span>
<span><span class="co">#&gt; 4      medium forb between about 10 and 60 cm (4 and 24 in) tall</span></span>
<span><span class="co">#&gt; 5 medium graminoid between about 10 and 60 cm (4 and 24 in) tall</span></span>
<span><span class="co">#&gt; 6 medium graminoid between about 10 and 60 cm (4 and 24 in) tall</span></span>
<span><span class="co">#&gt;   akstratumcoverclasspct utmzone utmeasting utmnorthing</span></span>
<span><span class="co">#&gt; 1                    4.0      11     361481     4107260</span></span>
<span><span class="co">#&gt; 2                    0.1      11     361481     4107260</span></span>
<span><span class="co">#&gt; 3                    0.1      11     361481     4107260</span></span>
<span><span class="co">#&gt; 4                    0.1      11     361481     4107260</span></span>
<span><span class="co">#&gt; 5                    1.0      11     361481     4107260</span></span>
<span><span class="co">#&gt; 6                    0.1      11     361481     4107260</span></span></code></pre></div>
<p>Now that the data is formatted we can begin to analyze it.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">CA792_veg_summary</span> <span class="op">&lt;-</span> <span class="fu">ecositer</span><span class="fu">::</span><span class="fu"><a href="../reference/veg_summary.html">veg_summary</a></span><span class="op">(</span>veg_df <span class="op">=</span> <span class="va">CA792_veg_formatted</span><span class="op">)</span></span></code></pre></div>
<p>The result of <code><a href="../reference/veg_summary.html">veg_summary()</a></code> is a nested list. This list
provides a vegetation summary for every ecosite and state/phase in your
dataset, cover data by strata, as well as raw dataset by ecosite and
state/phase. Below is an overview of the general structure of the
results.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">CA792_veg_summary</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span><span class="op">]</span>, max.level <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 3</span></span>
<span><span class="co">#&gt;  $ R022AB006CA:List of 4</span></span>
<span><span class="co">#&gt;   ..$ Raw_data       :'data.frame':  432 obs. of  15 variables:</span></span>
<span><span class="co">#&gt;   ..$ STM            :List of 5</span></span>
<span><span class="co">#&gt;   ..$ Cover_by_strata: tibble [8 × 5] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ Cover_data     :'data.frame':  107 obs. of  15 variables:</span></span>
<span><span class="co">#&gt;  $ R022AA102CA:List of 4</span></span>
<span><span class="co">#&gt;   ..$ Raw_data       :'data.frame':  360 obs. of  15 variables:</span></span>
<span><span class="co">#&gt;   ..$ STM            :List of 3</span></span>
<span><span class="co">#&gt;   ..$ Cover_by_strata: tibble [10 × 5] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ Cover_data     :'data.frame':  127 obs. of  15 variables:</span></span>
<span><span class="co">#&gt;  $ F022AD103CA:List of 4</span></span>
<span><span class="co">#&gt;   ..$ Raw_data       :'data.frame':  508 obs. of  15 variables:</span></span>
<span><span class="co">#&gt;   ..$ STM            :List of 7</span></span>
<span><span class="co">#&gt;   ..$ Cover_by_strata: tibble [11 × 5] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ Cover_data     :'data.frame':  146 obs. of  15 variables:</span></span></code></pre></div>
<p>Now let’s look at a vegetation summary for the ecosite R022AB006CA.
There are 15 columns with different attribute</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">CA792_veg_summary</span><span class="op">$</span><span class="va">R022AB006CA</span><span class="op">$</span><span class="va">Cover_data</span><span class="op">)</span></span>
<span><span class="co">#&gt;                  constancy  avg_abund twenty_percentile eighty_percentile</span></span>
<span><span class="co">#&gt; Juncus parryi     83.87097  2.9774194               0.1                 6</span></span>
<span><span class="co">#&gt; Pinus albicaulis  70.96774 14.5419355               0.0                25</span></span>
<span><span class="co">#&gt; Carex rossii      64.51613  0.5870968               0.0                 1</span></span>
<span><span class="co">#&gt; Carex filifolia   64.51613 10.3258065               0.0                22</span></span>
<span><span class="co">#&gt; Elymus elymoides  58.06452  0.6451613               0.0                 1</span></span>
<span><span class="co">#&gt; Poa secunda       51.61290  0.4451613               0.0                 1</span></span>
<span><span class="co">#&gt;                  median_abund max_abund min_abund sum_abund numb_plots_found</span></span>
<span><span class="co">#&gt; Juncus parryi            2.00        12         0      92.3               26</span></span>
<span><span class="co">#&gt; Pinus albicaulis         7.00        85         0     450.8               22</span></span>
<span><span class="co">#&gt; Carex rossii             0.75         3         0      18.2               20</span></span>
<span><span class="co">#&gt; Carex filifolia         13.00        50         0     320.1               20</span></span>
<span><span class="co">#&gt; Elymus elymoides         0.50         5         0      20.0               18</span></span>
<span><span class="co">#&gt; Poa secunda              0.75         2         0      13.8               16</span></span>
<span><span class="co">#&gt;                  numb_plots_not_found perc_obs_pres_abs perc_obs_in_ecosite</span></span>
<span><span class="co">#&gt; Juncus parryi                       5                 0           11.255411</span></span>
<span><span class="co">#&gt; Pinus albicaulis                    9                 0           17.886179</span></span>
<span><span class="co">#&gt; Carex rossii                       11                 0           11.560694</span></span>
<span><span class="co">#&gt; Carex filifolia                    11                 0           12.578616</span></span>
<span><span class="co">#&gt; Elymus elymoides                   13                 0            9.836066</span></span>
<span><span class="co">#&gt; Poa secunda                        15                 0           17.977528</span></span>
<span><span class="co">#&gt;                  perc_abund_in_ecosite importance ISA_p.value</span></span>
<span><span class="co">#&gt; Juncus parryi                12.839060  144.50890          NA</span></span>
<span><span class="co">#&gt; Pinus albicaulis             33.843844  605.33704          NA</span></span>
<span><span class="co">#&gt; Carex rossii                  6.520960   75.38682          NA</span></span>
<span><span class="co">#&gt; Carex filifolia              14.146816  177.94737          NA</span></span>
<span><span class="co">#&gt; Elymus elymoides              8.880995   87.35405          NA</span></span>
<span><span class="co">#&gt; Poa secunda                  11.886305  213.68638          NA</span></span></code></pre></div>
<p>One useful tool for looking at ecological data is Non-Metric
Multidimensional Scaling.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_nmds</span> <span class="op">&lt;-</span> <span class="fu">ecositer</span><span class="fu">::</span><span class="fu"><a href="../reference/nmds_ecosite.html">nmds_ecosite</a></span><span class="op">(</span>veg_summary <span class="op">=</span> <span class="va">CA792_veg_summary</span>, ecosite <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"F022AK100CA"</span>, <span class="st">"F022AK101CA"</span><span class="op">)</span>, pres_abs <span class="op">=</span> <span class="cn">TRUE</span>, nmds_dim <span class="op">=</span> <span class="fl">2</span>, reduce_species <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span>
<span><span class="co">#&gt; Run 0 stress 0.1920348 </span></span>
<span><span class="co">#&gt; Run 1 stress 0.2206309 </span></span>
<span><span class="co">#&gt; Run 2 stress 0.1949925 </span></span>
<span><span class="co">#&gt; Run 3 stress 0.1928914 </span></span>
<span><span class="co">#&gt; Run 4 stress 0.2156413 </span></span>
<span><span class="co">#&gt; Run 5 stress 0.1920347 </span></span>
<span><span class="co">#&gt; ... New best solution</span></span>
<span><span class="co">#&gt; ... Procrustes: rmse 9.971582e-05  max resid 0.0003527712 </span></span>
<span><span class="co">#&gt; ... Similar to previous best</span></span>
<span><span class="co">#&gt; Run 6 stress 0.2128062 </span></span>
<span><span class="co">#&gt; Run 7 stress 0.2243445 </span></span>
<span><span class="co">#&gt; Run 8 stress 0.2057902 </span></span>
<span><span class="co">#&gt; Run 9 stress 0.228716 </span></span>
<span><span class="co">#&gt; Run 10 stress 0.1944213 </span></span>
<span><span class="co">#&gt; Run 11 stress 0.1943799 </span></span>
<span><span class="co">#&gt; Run 12 stress 0.2210923 </span></span>
<span><span class="co">#&gt; Run 13 stress 0.20226 </span></span>
<span><span class="co">#&gt; Run 14 stress 0.2017056 </span></span>
<span><span class="co">#&gt; Run 15 stress 0.2047448 </span></span>
<span><span class="co">#&gt; Run 16 stress 0.1920488 </span></span>
<span><span class="co">#&gt; ... Procrustes: rmse 0.003358713  max resid 0.01653229 </span></span>
<span><span class="co">#&gt; Run 17 stress 0.2156387 </span></span>
<span><span class="co">#&gt; Run 18 stress 0.2353438 </span></span>
<span><span class="co">#&gt; Run 19 stress 0.1995372 </span></span>
<span><span class="co">#&gt; Run 20 stress 0.192042 </span></span>
<span><span class="co">#&gt; ... Procrustes: rmse 0.007682137  max resid 0.0324069 </span></span>
<span><span class="co">#&gt; Run 21 stress 0.1943662 </span></span>
<span><span class="co">#&gt; Run 22 stress 0.2060058 </span></span>
<span><span class="co">#&gt; Run 23 stress 0.2211874 </span></span>
<span><span class="co">#&gt; Run 24 stress 0.1920955 </span></span>
<span><span class="co">#&gt; ... Procrustes: rmse 0.0107872  max resid 0.05086861 </span></span>
<span><span class="co">#&gt; Run 25 stress 0.2017663 </span></span>
<span><span class="co">#&gt; Run 26 stress 0.2047435 </span></span>
<span><span class="co">#&gt; Run 27 stress 0.1949745 </span></span>
<span><span class="co">#&gt; Run 28 stress 0.1947134 </span></span>
<span><span class="co">#&gt; Run 29 stress 0.1930874 </span></span>
<span><span class="co">#&gt; Run 30 stress 0.1998254 </span></span>
<span><span class="co">#&gt; Run 31 stress 0.2074365 </span></span>
<span><span class="co">#&gt; Run 32 stress 0.2048689 </span></span>
<span><span class="co">#&gt; Run 33 stress 0.1944027 </span></span>
<span><span class="co">#&gt; Run 34 stress 0.2182454 </span></span>
<span><span class="co">#&gt; Run 35 stress 0.1920362 </span></span>
<span><span class="co">#&gt; ... Procrustes: rmse 0.0006705125  max resid 0.003280019 </span></span>
<span><span class="co">#&gt; ... Similar to previous best</span></span>
<span><span class="co">#&gt; Run 36 stress 0.2219792 </span></span>
<span><span class="co">#&gt; Run 37 stress 0.1920354 </span></span>
<span><span class="co">#&gt; ... Procrustes: rmse 0.0004382354  max resid 0.002143849 </span></span>
<span><span class="co">#&gt; ... Similar to previous best</span></span>
<span><span class="co">#&gt; Run 38 stress 0.1945044 </span></span>
<span><span class="co">#&gt; Run 39 stress 0.2488071 </span></span>
<span><span class="co">#&gt; Run 40 stress 0.2528011 </span></span>
<span><span class="co">#&gt; Run 41 stress 0.2208807 </span></span>
<span><span class="co">#&gt; Run 42 stress 0.2015641 </span></span>
<span><span class="co">#&gt; Run 43 stress 0.2244542 </span></span>
<span><span class="co">#&gt; Run 44 stress 0.1994271 </span></span>
<span><span class="co">#&gt; Run 45 stress 0.2241132 </span></span>
<span><span class="co">#&gt; Run 46 stress 0.1943952 </span></span>
<span><span class="co">#&gt; Run 47 stress 0.1920355 </span></span>
<span><span class="co">#&gt; ... Procrustes: rmse 0.003212065  max resid 0.01581209 </span></span>
<span><span class="co">#&gt; Run 48 stress 0.213759 </span></span>
<span><span class="co">#&gt; Run 49 stress 0.1998413 </span></span>
<span><span class="co">#&gt; Run 50 stress 0.1998268 </span></span>
<span><span class="co">#&gt; *** Best solution repeated 3 times</span></span></code></pre></div>
<p>Visualize NMDS</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/nmds_plot.html">nmds_plot</a></span><span class="op">(</span>static_location <span class="op">=</span> <span class="st">"C:/Users/Nathan.Roe/Documents/SEKI/CA792_veg.sqlite"</span>, </span>
<span>          nmds <span class="op">=</span> <span class="va">my_nmds</span>,</span>
<span>          veg_summary <span class="op">=</span> <span class="va">CA792_veg_summary</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; NOTE: some records are missing surface fragment cover</span></span>
<span><span class="co">#&gt; mixing dry colors ... [54 of 4847 horizons]</span></span>
<span><span class="co">#&gt; rgb2munsell() will be deprecated in aqp 2.1, please use col2Munsell() instead.</span></span>
<span><span class="co">#&gt; mixing moist colors ... [102 of 5407 horizons]</span></span>
<span><span class="co">#&gt; rgb2munsell() will be deprecated in aqp 2.1, please use col2Munsell() instead.</span></span>
<span><span class="co">#&gt; NOTE: some records are missing rock fragment volume</span></span>
<span><span class="co">#&gt; NOTE: all records are missing artifact volume</span></span>
<span><span class="co">#&gt; replacing missing lower horizon depths with top depth + 1cm ... [59 horizons]</span></span>
<span><span class="co">#&gt; -&gt; QC: sites without pedons: </span></span>
<span><span class="co">#&gt;  Use `get('sites.missing.pedons', envir=get_soilDB_env())` for site record IDs (siteiid)</span></span>
<span><span class="co">#&gt; -&gt; QC: duplicate pedons: </span></span>
<span><span class="co">#&gt;  Use `get('dup.pedon.ids', envir=get_soilDB_env())` for pedon record IDs (peiid)</span></span>
<span><span class="co">#&gt; -&gt; QC: pedons missing bottom hz depths:</span></span>
<span><span class="co">#&gt;  Use `get('missing.bottom.depths', envir=get_soilDB_env())` for pedon record IDs (peiid)</span></span>
<span><span class="co">#&gt; NOTE: some records are missing surface fragment cover</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(vegplot_id)`</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(site_id)`</span></span>
<span><span class="co">#&gt; 'nperm' &gt;= set of all permutations: complete enumeration.</span></span>
<span><span class="co">#&gt; Set of permutations &lt; 'minperm'. Generating entire set.</span></span>
<span><span class="co">#&gt; 'nperm' &gt;= set of all permutations: complete enumeration.</span></span>
<span><span class="co">#&gt; Set of permutations &lt; 'minperm'. Generating entire set.</span></span>
<span><span class="co">#&gt; 'nperm' &gt;= set of all permutations: complete enumeration.</span></span>
<span><span class="co">#&gt; Set of permutations &lt; 'minperm'. Generating entire set.</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(vegplot_id)`</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(site_id)`</span></span></code></pre>
<div id="htmlwidget-50089a7cbeaad85703bc" style="width:750px;height:500px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-50089a7cbeaad85703bc">{"x":{"data":[{"x":[-0.71491099093300736],"y":[1.0154238682545251],"text":"factor(akfieldecositeid): C109.1.?<br />2014CA7921007","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"C109.1.?","legendgroup":"C109.1.?","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-0.045413931888009788],"y":[1.0801973375343359],"text":"factor(akfieldecositeid): K001.1.1<br />2014CA7925042","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(196,154,0,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(196,154,0,1)"}},"hoveron":"points","name":"K001.1.1","legendgroup":"K001.1.1","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-0.35329258283709014,0.031561171772747386,0.13003994542863873,0.023213199112033518,-0.27113401552207056,-0.2020346891296432,0.35921619718694447,-0.37345546362755971,0.30356612610758843,-0.092335261853180917,-0.099537632283095409],"y":[-0.05390634081819326,0.12999610590646393,0.38512941679796686,0.19535114002641316,0.093037180835875852,0.38705625757055706,-0.3617256261680557,0.282301083478049,0.39375576830442521,-0.047090859704261426,0.15961333252479554],"text":["factor(akfieldecositeid): K100.1.1<br />2013CA7928005","factor(akfieldecositeid): K100.1.1<br />2014CA7920002","factor(akfieldecositeid): K100.1.1<br />2014CA7920005","factor(akfieldecositeid): K100.1.1<br />2014CA7920006","factor(akfieldecositeid): K100.1.1<br />2014CA7921006","factor(akfieldecositeid): K100.1.1<br />2014CA7924005","factor(akfieldecositeid): K100.1.1<br />2014CA7924009","factor(akfieldecositeid): K100.1.1<br />2014CA7925009","factor(akfieldecositeid): K100.1.1<br />2014CA7925012","factor(akfieldecositeid): K100.1.1<br />2014CA7927001","factor(akfieldecositeid): K100.1.1<br />2014CA7927004"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(83,180,0,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(83,180,0,1)"}},"hoveron":"points","name":"K100.1.1","legendgroup":"K100.1.1","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-0.17135126246517243],"y":[0.075424900310997731],"text":"factor(akfieldecositeid): K100.1.2F<br />2014CA7925003","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,192,148,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,192,148,1)"}},"hoveron":"points","name":"K100.1.2F","legendgroup":"K100.1.2F","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-0.55696363818589412],"y":[0.22139850207086598],"text":"factor(akfieldecositeid): K100.1.4G<br />2013CA7929005","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,182,235,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,182,235,1)"}},"hoveron":"points","name":"K100.1.4G","legendgroup":"K100.1.4G","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.43578838895092659,1.0417265056189344,0.048820849696257197,0.42223478508371187],"y":[-0.025202695331635962,-0.035658910849161306,0.6695663767386113,0.21157998322322547],"text":["factor(akfieldecositeid): K101.1.1<br />2014CA7920001","factor(akfieldecositeid): K101.1.1<br />2014CA7921005","factor(akfieldecositeid): K101.1.1<br />2014CA7925043","factor(akfieldecositeid): K101.1.1<br />2014CA7927003"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(165,138,255,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(165,138,255,1)"}},"hoveron":"points","name":"K101.1.1","legendgroup":"K101.1.1","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.50005196041406041,0.27900098492187519,0.43255920791172781,1.8010382001258505],"y":[-0.30800711049909968,-0.47757690585017987,-0.12400241432039306,0.1561672252414226],"text":["factor(akfieldecositeid): K101.1.2F<br />2013CA7927016","factor(akfieldecositeid): K101.1.2F<br />2013CA7928202","factor(akfieldecositeid): K101.1.2F<br />2014CA7925013","factor(akfieldecositeid): K101.1.2F<br />2014CA7929003"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(251,97,215,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(251,97,215,1)"}},"hoveron":"points","name":"K101.1.2F","legendgroup":"K101.1.2F","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-0.64185340515785516,-0.017530442682360627,-0.82421210160873515,-0.31812006569385154,-0.22031173654469999,-0.76032254875871319,0.092973679035687637,-0.30357575702868689,-0.1372783905441525,0.20184271537679471],"y":[0.12758616457365116,-0.18359127700271816,-0.63198203460389901,-0.65272692287808365,-0.39374927436954216,-0.2751365319124795,-0.50945527975278282,-0.36077334925075644,-0.80430205952492884,-0.33869705055601135],"text":["factor(akfieldecositeid): NA<br />2013CA7921010","factor(akfieldecositeid): NA<br />2013CA7921024","factor(akfieldecositeid): NA<br />2014CA7925011","factor(akfieldecositeid): NA<br />2017CA7925015","factor(akfieldecositeid): NA<br />2017CA7926006","factor(akfieldecositeid): NA<br />2019CA7921025","factor(akfieldecositeid): NA<br />2019CA7921037N","factor(akfieldecositeid): NA<br />2019CA7921041N","factor(akfieldecositeid): NA<br />2019CA7925024","factor(akfieldecositeid): NA<br />2019CA7925046"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(127,127,127,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(127,127,127,1)"}},"hoveron":"points","name":"NA","legendgroup":"NA","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-0.24315306275621423,0.45715887820700385,0.43743621789253362,-0.37259056064376195,-0.18043244382548412,0.14422741793233101,0.18380944940738725,0.8855539661537819,-0.25104919320600072,0.62332515378181719,1.4063863364565075,-0.42166039699777286,-0.57121270902053123,2.3439287552804657,2.3439287552804657,2.3439287552804657,2.3439287552804657,2.3439287552804657],"y":[0.45247154048353577,-0.17320106365460958,-0.16008956212984587,0.62103808885335043,0.51951023547506092,0.55637755605937089,0.27673398848640285,-0.056062301555658584,0.63350641759796789,0.13780823103060846,-0.041387738406575031,0.47215159959593433,-0.95014810259124827,0.17223966952196093,0.17223966952196093,0.17223966952196093,0.17223966952196093,0.17223966952196093],"text":["Galium","Calocedrus decurrens","Quercus kelloggii","Cercocarpus montanus","Rhamnus","Clarkia","Dryopteris arguta","Pinus lambertiana","Sanicula","Ribes montigenum","Abies concolor","Avena","Quercus wislizeni var. wislizeni","Abies magnifica","Carex","Lupinus","Pyrola picta","Sequoiadendron giganteum"],"hovertext":["","","","","","","","","","","","","","","","","",""],"textfont":{"size":7.559055118110237,"color":"rgba(0,0,0,1)"},"type":"scatter","mode":"text","hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0,0.37953476800040614,null,0,0.19572937864787296,null,0,-0.15870617026153269,null,0,0.73642878690986535,null,0,0.52005696672991752,null,0,0.546700404320144],"y":[0,-0.39042751013165461,null,0,-0.78915354093075296,null,0,-0.10465631291534386,null,0,0.18473843911852655,null,0,0.43032884432187246,null,0,0.59862790974088431],"text":"","type":"scatter","mode":"lines","line":{"width":1.1338582677165354,"color":"rgba(26,26,26,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.37953476800040614,0.19572937864787296,-0.15870617026153269,0.73642878690986535,0.52005696672991752,0.546700404320144],"y":[-0.39042751013165461,-0.78915354093075296,-0.10465631291534386,0.18473843911852655,0.43032884432187246,0.59862790974088431],"text":["slope_field","elev_field","surface_total_frags_pct","bedrckdepth","richness","shannon"],"hovertext":["","","","","",""],"textfont":{"size":15.118110236220474,"color":"rgba(0,0,0,1)"},"type":"scatter","mode":"text","hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":44.493150684931514,"r":7.3059360730593621,"b":40.913242009132432,"l":48.949771689497723},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Presence absence NMDS","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342468},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.9826191444531952,2.5023357981249257],"tickmode":"array","ticktext":["0","1","2"],"tickvals":[-1.1102230246251565e-16,1.0000000000000004,2],"categoryorder":"array","categoryarray":["0","1","2"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"NMDS1","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-1.0516653745975275,1.181714609540615],"tickmode":"array","ticktext":["-1.0","-0.5","0.0","0.5","1.0"],"tickvals":[-1,-0.5,0,0.5,1],"categoryorder":"array","categoryarray":["-1.0","-0.5","0.0","0.5","1.0"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"NMDS2","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":13.283520132835205},"title":{"text":"Ecosite state/phase","font":{"color":"rgba(0,0,0,1)","family":"","size":13.283520132835205}}},"hovermode":"closest","width":750,"height":500,"barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"1db062e48c80":{"x":{},"y":{},"colour":{},"text":{},"type":"scatter"},"1db048109217":{"x":{},"y":{},"label":{}},"1db0a8bed00":{"x":{},"y":{},"xend":{},"yend":{}},"1db043d3cacb":{"x":{},"y":{},"label":{}}},"cur_data":"1db062e48c80","visdat":{"1db062e48c80":["function (y) ","x"],"1db048109217":["function (y) ","x"],"1db0a8bed00":["function (y) ","x"],"1db043d3cacb":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script></main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Nathan Roe.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
