<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="ecositer">
<title>General Introduction to ecositer • ecositer</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="General Introduction to ecositer">
<meta property="og:description" content="ecositer">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ecositer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/cleaning_veg_data.html">cleaning_veg_data</a>
    <a class="dropdown-item" href="../articles/intro.html">General Introduction to ecositer</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/natearoe/ecositer/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="intro_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="intro_files/plotly-binding-4.10.4/plotly.js"></script><script src="intro_files/typedarray-0.1/typedarray.min.js"></script><link href="intro_files/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="intro_files/crosstalk-1.2.1/js/crosstalk.min.js"></script><link href="intro_files/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="intro_files/plotly-main-2.11.1/plotly-latest.min.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>General Introduction to ecositer</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/natearoe/ecositer/blob/HEAD/vignettes/intro.Rmd" class="external-link"><code>vignettes/intro.Rmd</code></a></small>
      <div class="d-none name"><code>intro.Rmd</code></div>
    </div>

    
    
<p>This vignette is intended to document basic functionality of the
<em>ecositer</em> package. This package is in development and should not
be expected to perform in a robust manner across different datasets. At
this point, the functionality here is a demonstration of workflows for
dealing with NRCS ecological site data. I hope that future development
of this package and standardization of NASIS population will make it
more applicable.</p>
<p>Library</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/natearoe/ecositer" class="external-link">ecositer</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ncss-tech/soilDB/" class="external-link">soilDB</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://emf-creaf.github.io/indicspecies/" class="external-link">indicspecies</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org" class="external-link">stringr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://plotly-r.com" class="external-link">plotly</a></span><span class="op">)</span></span></code></pre></div>
<p>Begin by querying NASIS so that you have a selected set containing
vegetation data. In this vignette, we will query for vegetation data in
Sequoia and Kings Canyon National Parks, soil survey area CA792.
Detailed instructions for making this query can be found <a href="https://natearoe.github.io/ESS_FAQs/ecosites.html#plotveg" class="external-link">here</a>.</p>
<p>Now that we have data in our selected set, we will introduce the
first <em>ecositer</em> function. <code><a href="../reference/vegStaticNASIS.html">vegStaticNASIS()</a></code> takes a
snapshot of your NASIS selected set and saves it in a local SQLite
database. It is referred to as “static” because it does not change. This
means that regardless of what is in your selected set in the future, you
can refer to this static NASIS database using a local file path on your
harddrive. Rather than switching between different queries and clearing
your selected set in NASIS, you will likely find it useful to save a few
specific selected sets locally on your computer. The functionality of
creating static NASIS selected sets is borrowed from <a href="https://github.com/ncss-tech/soilDB" class="external-link">soilDB</a>.
<code><a href="../reference/vegStaticNASIS.html">vegStaticNASIS()</a></code> is a special case designed specifically
for vegetation data.</p>
<p>The only argument in this function is <code>output_path</code> the
local file path where you want to save your static NASIS database.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ecositer</span><span class="fu">::</span><span class="fu"><a href="../reference/vegStaticNASIS.html">vegStaticNASIS</a></span><span class="op">(</span>output_path <span class="op">=</span> <span class="st">"C:/Users/Nathan.Roe/Documents/SEKI/CA792_veg.sqlite"</span><span class="op">)</span></span></code></pre></div>
<p>Now we can format our vegetation data into a more useful format</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">CA792_veg_formatted</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/formatted_veg_df.html">formatted_veg_df</a></span><span class="op">(</span>SS <span class="op">=</span> <span class="cn">FALSE</span>, static_location <span class="op">=</span> <span class="st">"C:/Users/Nathan.Roe/Documents/SEKI/CA792_veg.sqlite"</span><span class="op">)</span></span></code></pre></div>
<p>Let’s start off by looking at how many pedons and vegplots we have
for each ecosite</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">numb_plots</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/number_plots_by_site.html">number_plots_by_site</a></span><span class="op">(</span>static_location <span class="op">=</span> <span class="st">"C:/Users/Nathan.Roe/Documents/SEKI/CA792_veg.sqlite"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">numb_plots</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; Warning: non-standard notation in Munsell value, use getClosestMunsellChip()</span></span>
<span><span class="co">#&gt; Warning: Horizon top depths contain NA! Check depth logic with</span></span>
<span><span class="co">#&gt; aqp::checkHzDepthLogic()</span></span>
<span><span class="co">#&gt; Warning: Horizon bottom depths contain NA! Check depth logic with</span></span>
<span><span class="co">#&gt; aqp::checkHzDepthLogic()</span></span>
<span><span class="co">#&gt; Warning: cannot set `phiid` as unique pedon horizon key - `NA` introduced by</span></span>
<span><span class="co">#&gt; fill=TRUE</span></span></code></pre>
<p>Here is a look at a portion of the data we have assembled.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">CA792_veg_formatted</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">primarydatacollector</span>, <span class="op">-</span> <span class="va">plantnatvernm</span>, <span class="op">-</span><span class="va">akfieldecositeid</span>,</span>
<span>                                                   <span class="op">-</span><span class="va">vegplotid</span>, <span class="op">-</span><span class="va">vegplotiid</span>, <span class="op">-</span><span class="va">plantsym</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;   siteiid   ecositeid                       plantsciname</span></span>
<span><span class="co">#&gt; 1  541059 R022AB006CA                    Carex filifolia</span></span>
<span><span class="co">#&gt; 2  541059 R022AB006CA                              Carex</span></span>
<span><span class="co">#&gt; 3  541059 R022AB006CA Cistanthe umbellata var. umbellata</span></span>
<span><span class="co">#&gt; 4  541059 R022AB006CA        Cryptogramma acrostichoides</span></span>
<span><span class="co">#&gt; 5  541059 R022AB006CA                          Danthonia</span></span>
<span><span class="co">#&gt; 6  541059 R022AB006CA                   Elymus elymoides</span></span>
<span><span class="co">#&gt;                                              akstratumcoverclass</span></span>
<span><span class="co">#&gt; 1 medium graminoid between about 10 and 60 cm (4 and 24 in) tall</span></span>
<span><span class="co">#&gt; 2 medium graminoid between about 10 and 60 cm (4 and 24 in) tall</span></span>
<span><span class="co">#&gt; 3      medium forb between about 10 and 60 cm (4 and 24 in) tall</span></span>
<span><span class="co">#&gt; 4      medium forb between about 10 and 60 cm (4 and 24 in) tall</span></span>
<span><span class="co">#&gt; 5 medium graminoid between about 10 and 60 cm (4 and 24 in) tall</span></span>
<span><span class="co">#&gt; 6 medium graminoid between about 10 and 60 cm (4 and 24 in) tall</span></span>
<span><span class="co">#&gt;   akstratumcoverclasspct horizdatnm utmzone utmeasting utmnorthing</span></span>
<span><span class="co">#&gt; 1                    4.0      WGS84      11     361481     4107260</span></span>
<span><span class="co">#&gt; 2                    0.1      WGS84      11     361481     4107260</span></span>
<span><span class="co">#&gt; 3                    0.1      WGS84      11     361481     4107260</span></span>
<span><span class="co">#&gt; 4                    0.1      WGS84      11     361481     4107260</span></span>
<span><span class="co">#&gt; 5                    1.0      WGS84      11     361481     4107260</span></span>
<span><span class="co">#&gt; 6                    0.1      WGS84      11     361481     4107260</span></span></code></pre></div>
<p>Now that the data is formatted we can begin to analyze it.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">CA792_veg_summary</span> <span class="op">&lt;-</span> <span class="fu">ecositer</span><span class="fu">::</span><span class="fu"><a href="../reference/veg_summary.html">veg_summary</a></span><span class="op">(</span>veg_df <span class="op">=</span> <span class="va">CA792_veg_formatted</span><span class="op">)</span></span></code></pre></div>
<p>The result of <code><a href="../reference/veg_summary.html">veg_summary()</a></code> is a nested list. This list
provides a vegetation summary for every ecosite and state/phase in your
dataset, cover data by strata, as well as raw dataset by ecosite and
state/phase. Below is an overview of the general structure of the
results.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">CA792_veg_summary</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span><span class="op">]</span>, max.level <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 3</span></span>
<span><span class="co">#&gt;  $ R022AB006CA:List of 4</span></span>
<span><span class="co">#&gt;   ..$ Raw_data       :Classes 'data.table' and 'data.frame': 432 obs. of  15 variables:</span></span>
<span><span class="co">#&gt;   .. ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">#&gt;   ..$ Cover_by_strata: num [1:8, 1:10] 90.3 90.3 80.6 58.1 32.3 ...</span></span>
<span><span class="co">#&gt;   .. ..- attr(*, "dimnames")=List of 2</span></span>
<span><span class="co">#&gt;   ..$ Summary        : num [1:107, 1:12] 83.9 71 64.5 64.5 58.1 ...</span></span>
<span><span class="co">#&gt;   .. ..- attr(*, "dimnames")=List of 2</span></span>
<span><span class="co">#&gt;   ..$ STM            :List of 5</span></span>
<span><span class="co">#&gt;  $ R022AA102CA:List of 4</span></span>
<span><span class="co">#&gt;   ..$ Raw_data       :Classes 'data.table' and 'data.frame': 359 obs. of  15 variables:</span></span>
<span><span class="co">#&gt;   .. ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">#&gt;   ..$ Cover_by_strata: num [1:10, 1:10] 65.4 61.5 30.8 23.1 19.2 ...</span></span>
<span><span class="co">#&gt;   .. ..- attr(*, "dimnames")=List of 2</span></span>
<span><span class="co">#&gt;   ..$ Summary        : num [1:127, 1:12] 84.6 53.8 50 46.2 42.3 ...</span></span>
<span><span class="co">#&gt;   .. ..- attr(*, "dimnames")=List of 2</span></span>
<span><span class="co">#&gt;   ..$ STM            :List of 3</span></span>
<span><span class="co">#&gt;  $ F022AD103CA:List of 4</span></span>
<span><span class="co">#&gt;   ..$ Raw_data       :Classes 'data.table' and 'data.frame': 503 obs. of  15 variables:</span></span>
<span><span class="co">#&gt;   .. ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">#&gt;   ..$ Cover_by_strata: num [1:11, 1:10] 84 84 84 80 76 76 64 40 32 16 ...</span></span>
<span><span class="co">#&gt;   .. ..- attr(*, "dimnames")=List of 2</span></span>
<span><span class="co">#&gt;   ..$ Summary        : num [1:146, 1:12] 76 60 52 48 40 32 32 28 24 24 ...</span></span>
<span><span class="co">#&gt;   .. ..- attr(*, "dimnames")=List of 2</span></span>
<span><span class="co">#&gt;   ..$ STM            :List of 7</span></span></code></pre></div>
<p>Now let’s look at a vegetation summary for the ecosite R022AB006CA.
There are 15 columns with different attribute</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">CA792_veg_summary</span><span class="op">$</span><span class="va">R022AB006CA</span><span class="op">$</span><span class="va">Cover_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; NULL</span></span></code></pre></div>
<p>One useful tool for looking at ecological data is Non-Metric
Multidimensional Scaling.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_nmds</span> <span class="op">&lt;-</span> <span class="fu">ecositer</span><span class="fu">::</span><span class="fu"><a href="../reference/nmds_ecosite.html">nmds_ecosite</a></span><span class="op">(</span>veg_summary <span class="op">=</span> <span class="va">CA792_veg_summary</span>, ecosite <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"F022AK100CA"</span>, <span class="st">"F022AK101CA"</span><span class="op">)</span>, pres_abs <span class="op">=</span> <span class="cn">TRUE</span>, nmds_dim <span class="op">=</span> <span class="fl">2</span>, reduce_species <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span>
<span><span class="co">#&gt; Run 0 stress 0.1907626 </span></span>
<span><span class="co">#&gt; Run 1 stress 0.2021029 </span></span>
<span><span class="co">#&gt; Run 2 stress 0.2045672 </span></span>
<span><span class="co">#&gt; Run 3 stress 0.1964799 </span></span>
<span><span class="co">#&gt; Run 4 stress 0.1964736 </span></span>
<span><span class="co">#&gt; Run 5 stress 0.1909575 </span></span>
<span><span class="co">#&gt; ... Procrustes: rmse 0.023332  max resid 0.08319573 </span></span>
<span><span class="co">#&gt; Run 6 stress 0.2009025 </span></span>
<span><span class="co">#&gt; Run 7 stress 0.1907763 </span></span>
<span><span class="co">#&gt; ... Procrustes: rmse 0.01201048  max resid 0.04326047 </span></span>
<span><span class="co">#&gt; Run 8 stress 0.2009342 </span></span>
<span><span class="co">#&gt; Run 9 stress 0.2073787 </span></span>
<span><span class="co">#&gt; Run 10 stress 0.2045682 </span></span>
<span><span class="co">#&gt; Run 11 stress 0.2098923 </span></span>
<span><span class="co">#&gt; Run 12 stress 0.1949104 </span></span>
<span><span class="co">#&gt; Run 13 stress 0.20231 </span></span>
<span><span class="co">#&gt; Run 14 stress 0.2014927 </span></span>
<span><span class="co">#&gt; Run 15 stress 0.194246 </span></span>
<span><span class="co">#&gt; Run 16 stress 0.2010204 </span></span>
<span><span class="co">#&gt; Run 17 stress 0.2045675 </span></span>
<span><span class="co">#&gt; Run 18 stress 0.1950258 </span></span>
<span><span class="co">#&gt; Run 19 stress 0.2286574 </span></span>
<span><span class="co">#&gt; Run 20 stress 0.2010031 </span></span>
<span><span class="co">#&gt; Run 21 stress 0.2068075 </span></span>
<span><span class="co">#&gt; Run 22 stress 0.2120777 </span></span>
<span><span class="co">#&gt; Run 23 stress 0.1895338 </span></span>
<span><span class="co">#&gt; ... New best solution</span></span>
<span><span class="co">#&gt; ... Procrustes: rmse 0.02057939  max resid 0.0807273 </span></span>
<span><span class="co">#&gt; Run 24 stress 0.2083849 </span></span>
<span><span class="co">#&gt; Run 25 stress 0.1917531 </span></span>
<span><span class="co">#&gt; Run 26 stress 0.2196394 </span></span>
<span><span class="co">#&gt; Run 27 stress 0.1964227 </span></span>
<span><span class="co">#&gt; Run 28 stress 0.2010418 </span></span>
<span><span class="co">#&gt; Run 29 stress 0.2390594 </span></span>
<span><span class="co">#&gt; Run 30 stress 0.2051823 </span></span>
<span><span class="co">#&gt; Run 31 stress 0.1902311 </span></span>
<span><span class="co">#&gt; Run 32 stress 0.1910105 </span></span>
<span><span class="co">#&gt; Run 33 stress 0.2116815 </span></span>
<span><span class="co">#&gt; Run 34 stress 0.1895259 </span></span>
<span><span class="co">#&gt; ... New best solution</span></span>
<span><span class="co">#&gt; ... Procrustes: rmse 0.004144433  max resid 0.01834281 </span></span>
<span><span class="co">#&gt; Run 35 stress 0.1947031 </span></span>
<span><span class="co">#&gt; Run 36 stress 0.2023486 </span></span>
<span><span class="co">#&gt; Run 37 stress 0.1968613 </span></span>
<span><span class="co">#&gt; Run 38 stress 0.2012704 </span></span>
<span><span class="co">#&gt; Run 39 stress 0.1906525 </span></span>
<span><span class="co">#&gt; Run 40 stress 0.1895266 </span></span>
<span><span class="co">#&gt; ... Procrustes: rmse 0.001676936  max resid 0.007765543 </span></span>
<span><span class="co">#&gt; ... Similar to previous best</span></span>
<span><span class="co">#&gt; Run 41 stress 0.1906828 </span></span>
<span><span class="co">#&gt; Run 42 stress 0.1965398 </span></span>
<span><span class="co">#&gt; Run 43 stress 0.1898988 </span></span>
<span><span class="co">#&gt; ... Procrustes: rmse 0.01825625  max resid 0.07161844 </span></span>
<span><span class="co">#&gt; Run 44 stress 0.19491 </span></span>
<span><span class="co">#&gt; Run 45 stress 0.2001294 </span></span>
<span><span class="co">#&gt; Run 46 stress 0.2189662 </span></span>
<span><span class="co">#&gt; Run 47 stress 0.1895265 </span></span>
<span><span class="co">#&gt; ... Procrustes: rmse 0.0009951449  max resid 0.004253367 </span></span>
<span><span class="co">#&gt; ... Similar to previous best</span></span>
<span><span class="co">#&gt; Run 48 stress 0.1914185 </span></span>
<span><span class="co">#&gt; Run 49 stress 0.201046 </span></span>
<span><span class="co">#&gt; Run 50 stress 0.1925297 </span></span>
<span><span class="co">#&gt; *** Best solution repeated 2 times</span></span></code></pre></div>
<p>Visualize NMDS</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/nmds_plot.html">nmds_plot</a></span><span class="op">(</span>static_location <span class="op">=</span> <span class="st">"C:/Users/Nathan.Roe/Documents/SEKI/CA792_veg.sqlite"</span>, </span>
<span>          nmds <span class="op">=</span> <span class="va">my_nmds</span>,</span>
<span>          veg_summary <span class="op">=</span> <span class="va">CA792_veg_summary</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; NOTE: some records are missing surface fragment cover</span></span>
<span><span class="co">#&gt; mixing dry colors ... [54 of 4847 horizons]</span></span>
<span><span class="co">#&gt; mixing moist colors ... [102 of 5407 horizons]</span></span>
<span><span class="co">#&gt; NOTE: some records are missing rock fragment volume</span></span>
<span><span class="co">#&gt; NOTE: all records are missing artifact volume</span></span>
<span><span class="co">#&gt; replacing missing lower horizon depths with top depth + 1cm ... [59 horizons]</span></span>
<span><span class="co">#&gt; -&gt; QC: sites without pedons: </span></span>
<span><span class="co">#&gt;  Use `get('sites.missing.pedons', envir=get_soilDB_env())` for site record IDs (siteiid)</span></span>
<span><span class="co">#&gt; -&gt; QC: duplicate pedons: </span></span>
<span><span class="co">#&gt;  Use `get('dup.pedon.ids', envir=get_soilDB_env())` for pedon record IDs (peiid)</span></span>
<span><span class="co">#&gt; -&gt; QC: pedons missing bottom hz depths:</span></span>
<span><span class="co">#&gt;  Use `get('missing.bottom.depths', envir=get_soilDB_env())` for pedon record IDs (peiid)</span></span>
<span><span class="co">#&gt; NOTE: some records are missing surface fragment cover</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(vegplot_id)`</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(site_id)`</span></span>
<span><span class="co">#&gt; 'nperm' &gt;= set of all permutations: complete enumeration.</span></span>
<span><span class="co">#&gt; Set of permutations &lt; 'minperm'. Generating entire set.</span></span>
<span><span class="co">#&gt; 'nperm' &gt;= set of all permutations: complete enumeration.</span></span>
<span><span class="co">#&gt; Set of permutations &lt; 'minperm'. Generating entire set.</span></span>
<span><span class="co">#&gt; 'nperm' &gt;= set of all permutations: complete enumeration.</span></span>
<span><span class="co">#&gt; Set of permutations &lt; 'minperm'. Generating entire set.</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(vegplot_id)`</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(site_id)`</span></span></code></pre>
<div id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:750px;height:500px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"data":[{"x":[0.91484286187001296],"y":[0.85831660299024393],"text":"factor(akfieldecositeid): C109.1.?<br />2014CA7921007","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"C109.1.?","legendgroup":"C109.1.?","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.20921939681470519],"y":[1.0693533320829103],"text":"factor(akfieldecositeid): K001.1.1<br />2014CA7925042","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(196,154,0,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(196,154,0,1)"}},"hoveron":"points","name":"K001.1.1","legendgroup":"K001.1.1","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.38114420121912784,0.0020420759358165948,-0.041273555010810752,0.070799135388625117,0.31564365360982449,0.31812352006658479,-0.3894391464877493,0.49413461728477437,-0.20425861117838232,0.13124492873718233,0.17335402095061261],"y":[-0.16248488944196912,0.12952500549223953,0.3899328142581393,0.16994320072350594,0.07052424627312244,0.31266942592545832,-0.2980634808553701,0.15192921901714398,0.41747775512967844,-0.092991172098009708,0.086856520730042394],"text":["factor(akfieldecositeid): K100.1.1<br />2013CA7928005","factor(akfieldecositeid): K100.1.1<br />2014CA7920002","factor(akfieldecositeid): K100.1.1<br />2014CA7920005","factor(akfieldecositeid): K100.1.1<br />2014CA7920006","factor(akfieldecositeid): K100.1.1<br />2014CA7921006","factor(akfieldecositeid): K100.1.1<br />2014CA7924005","factor(akfieldecositeid): K100.1.1<br />2014CA7924009","factor(akfieldecositeid): K100.1.1<br />2014CA7925009","factor(akfieldecositeid): K100.1.1<br />2014CA7925012","factor(akfieldecositeid): K100.1.1<br />2014CA7927001","factor(akfieldecositeid): K100.1.1<br />2014CA7927004"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(83,180,0,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(83,180,0,1)"}},"hoveron":"points","name":"K100.1.1","legendgroup":"K100.1.1","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.21803907096573569],"y":[-0.0037448230944652126],"text":"factor(akfieldecositeid): K100.1.2F<br />2014CA7925003","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,192,148,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,192,148,1)"}},"hoveron":"points","name":"K100.1.2F","legendgroup":"K100.1.2F","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.66972260598449007],"y":[0.056130736972227854],"text":"factor(akfieldecositeid): K100.1.4G<br />2013CA7929005","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,182,235,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,182,235,1)"}},"hoveron":"points","name":"K100.1.4G","legendgroup":"K100.1.4G","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-0.43420109519189398,-1.0049714713407438,0.084250755610045414,-0.34266238413586253],"y":[0.02883519249622107,0.082159259487878236,0.65031187139932234,0.23750974848989348],"text":["factor(akfieldecositeid): K101.1.1<br />2014CA7920001","factor(akfieldecositeid): K101.1.1<br />2014CA7921005","factor(akfieldecositeid): K101.1.1<br />2014CA7925043","factor(akfieldecositeid): K101.1.1<br />2014CA7927003"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(165,138,255,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(165,138,255,1)"}},"hoveron":"points","name":"K101.1.1","legendgroup":"K101.1.1","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-0.5187207009459166,-0.26915982533820354,-0.43112751353868622,-1.6708901216803587],"y":[-0.36655834930903763,-0.50367180664172073,-0.085444063528422445,0.45127481500973188],"text":["factor(akfieldecositeid): K101.1.2F<br />2013CA7927016","factor(akfieldecositeid): K101.1.2F<br />2013CA7928202","factor(akfieldecositeid): K101.1.2F<br />2014CA7925013","factor(akfieldecositeid): K101.1.2F<br />2014CA7929003"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(251,97,215,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(251,97,215,1)"}},"hoveron":"points","name":"K101.1.2F","legendgroup":"K101.1.2F","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.34629222310301289,0.22521433748123071,0.76916843043622929,-0.12922989817161659,0.31485489417890389,0.05393866092114899,-0.25609506753783939],"y":[-0.72553333364035744,-0.46917229753916595,-0.38272094635879073,-0.52416513216615368,-0.45933936123387409,-0.7998111172710245,-0.28904897329939827],"text":["factor(akfieldecositeid): NA<br />2017CA7925015","factor(akfieldecositeid): NA<br />2017CA7926006","factor(akfieldecositeid): NA<br />2019CA7921025","factor(akfieldecositeid): NA<br />2019CA7921037N","factor(akfieldecositeid): NA<br />2019CA7921041N","factor(akfieldecositeid): NA<br />2019CA7925024","factor(akfieldecositeid): NA<br />2019CA7925046"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(127,127,127,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(127,127,127,1)"}},"hoveron":"points","name":"NA","legendgroup":"NA","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-0.44990408336004778,-0.41760327812079667,0.23879696735269465,0.51031313770763409,0.30203541919997817,0.33507193426677556,-0.044915176151465168,-0.10259212502164272,-0.84265345481873333,0.38843869135477771,-0.52875922394146246,-1.3332222476357984,0.55011331902793603,-2.1611411639141527,-2.1611411639141527,-2.1611411639141527,-2.1611411639141527,-2.1611411639141527,0.26070501579200084],"y":[-0.15123350414831521,-0.15319813917095421,-0.084148337334509993,0.51459605856893686,0.45363627079582847,0.48599951734855779,0.57255326797247585,0.27260066790758553,0.064578893193994874,0.5564120662944787,0.2114828173247488,0.15368094710557681,0.3424875869068017,0.56946124276419141,0.56946124276419141,0.56946124276419141,0.56946124276419141,0.56946124276419141,-1.0506653398945411],"text":["Calocedrus decurrens","Quercus kelloggii","Toxicodendron diversilobum","Cercocarpus montanus","Rhamnus","Galium","Clarkia","Dryopteris arguta","Pinus lambertiana","Sanicula","Ribes montigenum","Abies concolor","Avena","Abies magnifica","Carex","Lupinus","Pyrola picta","Sequoiadendron giganteum","Quercus wislizeni var. wislizeni"],"hovertext":["","","","","","","","","","","","","","","","","","",""],"textfont":{"size":7.559055118110237,"color":"rgba(0,0,0,1)"},"type":"scatter","mode":"text","hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0,0.47914761198636097,null,0,0.39851563875958096,null,0,-0.61854231028852724,null,0,0.65231021568069414,null,0,0.1870592402691971,null,0,0.14052998719181792],"y":[0,0.1303667989033451,null,0,-0.64892397242493205,null,0,-0.50741382743844676,null,0,-0.012440553448501875,null,0,0.35375320189794351,null,0,0.28033531695610292],"text":"","type":"scatter","mode":"lines","line":{"width":1.1338582677165354,"color":"rgba(26,26,26,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.47914761198636097,0.39851563875958096,-0.61854231028852724,0.65231021568069414,0.1870592402691971,0.14052998719181792],"y":[0.1303667989033451,-0.64892397242493205,-0.50741382743844676,-0.012440553448501875,0.35375320189794351,0.28033531695610292],"text":["slope_field","elev_field","surface_total_frags_pct","bedrckdepth","richness","shannon"],"hovertext":["","","","","",""],"textfont":{"size":15.118110236220474,"color":"rgba(0,0,0,1)"},"type":"scatter","mode":"text","hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":44.493150684931514,"r":7.3059360730593621,"b":40.913242009132432,"l":48.949771689497723},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Presence absence NMDS","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342468},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-2.3149403652033609,1.0686420631592213],"tickmode":"array","ticktext":["-2","-1","0","1"],"tickvals":[-2,-1,0,1],"categoryorder":"array","categoryarray":["-2","-1","0","1"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"NMDS1","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-1.1566662734934137,1.1753542656817828],"tickmode":"array","ticktext":["-1.0","-0.5","0.0","0.5","1.0"],"tickvals":[-1,-0.5,0,0.5,1],"categoryorder":"array","categoryarray":["-1.0","-0.5","0.0","0.5","1.0"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"NMDS2","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":13.283520132835205},"title":{"text":"Ecosite state/phase","font":{"color":"rgba(0,0,0,1)","family":"","size":13.283520132835205}}},"hovermode":"closest","width":750,"height":500,"barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"1c873c62b1db":{"x":{},"y":{},"colour":{},"text":{},"type":"scatter"},"1c874caa6784":{"x":{},"y":{},"label":{}},"1c8776591e71":{"x":{},"y":{},"xend":{},"yend":{}},"1c87641d32bf":{"x":{},"y":{},"label":{}}},"cur_data":"1c873c62b1db","visdat":{"1c873c62b1db":["function (y) ","x"],"1c874caa6784":["function (y) ","x"],"1c8776591e71":["function (y) ","x"],"1c87641d32bf":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script></main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nathan Roe.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
