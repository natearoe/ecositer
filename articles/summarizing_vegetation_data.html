<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Summarizing vegetation data • ecositer</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Summarizing vegetation data">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ecositer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/accessing_vegetation_data.html">Accessing vegetation data</a></li>
    <li><a class="dropdown-item" href="../articles/qc_vegetation_data.html">QC vegetation data</a></li>
    <li><a class="dropdown-item" href="../articles/summarizing_vegetation_data.html">Summarizing vegetation data</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/natearoe/ecositer/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Summarizing vegetation data</h1>
                        <h4 data-toc-skip class="author">Nathan Roe</h4>
            
            <h4 data-toc-skip class="date">2025-01-02</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/natearoe/ecositer/blob/main/vignettes/summarizing_vegetation_data.Rmd" class="external-link"><code>vignettes/summarizing_vegetation_data.Rmd</code></a></small>
      <div class="d-none name"><code>summarizing_vegetation_data.Rmd</code></div>
    </div>

    
    
<p><strong>About</strong></p>
<p><code>ecositer</code> has a category of functions used for
summarizing, all of which use a “summarize_” prefix. QC should be
performed prior to summarizing - <a href="https://natearoe.github.io/ecositer/articles/qc_vegetation_data.html">QCing
vegetation data</a>.</p>
<p><strong>Summarizing vegetation data by ecosite</strong>
<code><a href="../reference/QC_best_vegplot_for_site.html">QC_best_vegplot_for_site()</a></code> is used to summarize vegetation
data by ecosite, state, and phase. This function evaluates several
elements of data quality, and in some cases performs QC. An example of
performing QC is <code><a href="../reference/QC_aggregate_abundance.html">QC_aggregate_abundance()</a></code>, which is run by
default in this function. An example of evaluating elements of QC is
reporting if there are multiple state names associated with a stateid.
The messages produced by this function should be read and efforts should
be made to address the data quality conditions that are described in the
messages.</p>
<p>Load data</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Y222_veg</span> <span class="op">&lt;-</span> <span class="fu">ecositer</span><span class="fu">::</span><span class="fu"><a href="../reference/create_veg_df.html">create_veg_df</a></span><span class="op">(</span>from <span class="op">=</span> <span class="st">"web_report"</span>,</span>
<span>                                 ecositeid <span class="op">=</span> <span class="st">"R232XY222AK"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Error in get(paste0(generic, ".", class), envir = get_method_env()) : </span></span>
<span><span class="co">##   object 'type_sum.accel' not found</span></span></code></pre>
<p>Summarize data</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Y222_summary</span> <span class="op">&lt;-</span> <span class="fu">ecositer</span><span class="fu">::</span><span class="fu"><a href="../reference/summarize_veg_by_ecosite.html">summarize_veg_by_ecosite</a></span><span class="op">(</span>veg_df <span class="op">=</span> <span class="va">Y222_veg</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Note: speciescancovpct is the only abundance column used in this dataset</span></span></code></pre>
<pre><code><span><span class="co">## Note: The following taxonomical changes have been made.</span></span></code></pre>
<pre><code><span><span class="co">## Alopecurus alpinus changed to Alopecurus magellanicus </span></span>
<span><span class="co">## Alopecurus alpinus changed to Alopecurus magellanicus </span></span>
<span><span class="co">## Triglochin palustre changed to Triglochin palustris </span></span>
<span><span class="co">## Dasiphora fruticosa changed to Dasiphora fruticosa ssp. floribunda </span></span>
<span><span class="co">## Dasiphora fruticosa changed to Dasiphora fruticosa ssp. floribunda </span></span>
<span><span class="co">## Alopecurus alpinus changed to Alopecurus magellanicus </span></span>
<span><span class="co">## Triglochin palustre changed to Triglochin palustris </span></span>
<span><span class="co">## Juncus balticus changed to Juncus arcticus ssp. littoralis </span></span>
<span><span class="co">## Triglochin palustre changed to Triglochin palustris </span></span>
<span><span class="co">## Triglochin maritimum changed to Triglochin maritima </span></span>
<span><span class="co">## Triglochin maritimum changed to Triglochin maritima </span></span>
<span><span class="co">## Triglochin palustre changed to Triglochin palustris</span></span></code></pre>
<pre><code><span><span class="co">## Warning: There are multiple state names associated with the same stateid. To identify these situations, use:</span></span>
<span><span class="co">##           `Your veg df` |&gt;</span></span>
<span><span class="co">##     dplyr::group_by(ecositeid, ecostateid) |&gt;</span></span>
<span><span class="co">##     dplyr::filter(dplyr::n_distinct(ecostatename) &gt; 1) |&gt;</span></span>
<span><span class="co">##     dplyr::distinct(ecositeid, ecostateid, ecostatename) |&gt;</span></span>
<span><span class="co">##     dplyr::arrange(ecositeid, ecostateid, ecostatename)</span></span></code></pre>
<pre><code><span><span class="co">## Warning: There are multiple phase names associated with the same phaseid. To identify these situations, use:</span></span>
<span><span class="co">##             `Your veg df` |&gt;</span></span>
<span><span class="co">##     dplyr::group_by(ecositeid, ecostateid, commphaseid) |&gt;</span></span>
<span><span class="co">##     dplyr::filter(dplyr::n_distinct(commphasename) &gt; 1) |&gt;</span></span>
<span><span class="co">##     dplyr::distinct(ecositeid, ecostateid, commphaseid, commphasename) |&gt;</span></span>
<span><span class="co">##     dplyr::arrange(ecositeid, ecostateid, commphaseid, commphasename)</span></span></code></pre>
<pre><code><span><span class="co">## Warning: 414 records missing abundance. These records are removed from results.</span></span></code></pre>
<p>Note the warnings produced, such as multiple state names being
associated with the same stateid. The code to inspect such situations is
also supplied.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>    <span class="va">Y222_veg</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">ecositeid</span>, <span class="va">ecostateid</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/n_distinct.html" class="external-link">n_distinct</a></span><span class="op">(</span><span class="va">ecostatename</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">ecositeid</span>, <span class="va">ecostateid</span>, <span class="va">ecostatename</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">ecositeid</span>, <span class="va">ecostateid</span>, <span class="va">ecostatename</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 2 × 3</span></span></span>
<span><span class="co">## <span style="color: #949494;"># Groups:   ecositeid, ecostateid [1]</span></span></span>
<span><span class="co">##   ecositeid   ecostateid ecostatename   </span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> R232XY222AK 1          Reference State</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> R232XY222AK 1          reference state</span></span></code></pre>
<p>In this situation, the different state names are differences in
capitalized letters. I have seen many other cases in NASIS where
completely different state names are associated with the same stateid,
so it is worth checking this. Also, for the sake standardization, it is
worth having the names be exactly same (i.e., using the same
capitalization).</p>
<p>To examine the summarized data, type Y222_summary and put a ‘$’ at
the end of it. The data structure output by
<code><a href="../reference/summarize_veg_by_ecosite.html">summarize_veg_by_ecosite()</a></code> is called a list. Lists are
extremely flexible data structure that work well for storing complex,
heterogeneous data.</p>
<p>The “$” allows you to access the elements at that location of the
list. After choosing an element, use the dollar sign again to access the
next level of the list. Here is an example of a dataframe stored within
the list structure.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Y222_summary</span><span class="op">$</span><span class="va">R232XY222AK</span><span class="op">$</span><span class="va">species_summary</span> </span></code></pre></div>
<pre><code><span><span class="co">##      plantsym             plantsciname         plantnatvernm  constancy</span></span>
<span><span class="co">##        &lt;char&gt;                   &lt;char&gt;                &lt;char&gt;      &lt;num&gt;</span></span>
<span><span class="co">##   1:     CAAQ          Carex aquatilis           water sedge 46.2962963</span></span>
<span><span class="co">##   2:     HOJU          Hordeum jubatum        foxtail barley 43.5185185</span></span>
<span><span class="co">##   3:    CACA4 Calamagrostis canadensis             bluejoint 31.4814815</span></span>
<span><span class="co">##   4:    GEMA4        Geum macrophyllum       largeleaf avens 22.2222222</span></span>
<span><span class="co">##   5:    CAAT2          Carex atherodes           wheat sedge 20.3703704</span></span>
<span><span class="co">##  ---                                                                   </span></span>
<span><span class="co">## 130:    SAUN8        Sanionia uncinata         sanionia moss  0.9259259</span></span>
<span><span class="co">## 131:    SENEC                  Senecio               ragwort  0.9259259</span></span>
<span><span class="co">## 132:     SPRO Spiranthes romanzoffiana hooded lady's tresses  0.9259259</span></span>
<span><span class="co">## 133:    STLO2       Stellaria longipes    longstalk starwort  0.9259259</span></span>
<span><span class="co">## 134:    TRIGL               Triglochin            arrowgrass  0.9259259</span></span>
<span><span class="co">##             mean median   min   max   sum  20th  80th sites_present</span></span>
<span><span class="co">##            &lt;num&gt;  &lt;num&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt;         &lt;num&gt;</span></span>
<span><span class="co">##   1: 15.87962963      0     0    80  1715     0  30.0            50</span></span>
<span><span class="co">##   2:  5.24074074      0     0    50   566     0   5.0            47</span></span>
<span><span class="co">##   3:  4.32407407      0     0    65   467     0   2.6            34</span></span>
<span><span class="co">##   4:  1.29629630      0     0    25   140     0   1.0            24</span></span>
<span><span class="co">##   5:  5.26851852      0     0    70   569     0   0.6            22</span></span>
<span><span class="co">##  ---                                                               </span></span>
<span><span class="co">## 130:  0.37037037      0     0    40    40     0   0.0             1</span></span>
<span><span class="co">## 131:  0.02777778      0     0     3     3     0   0.0             1</span></span>
<span><span class="co">## 132:  0.02777778      0     0     3     3     0   0.0             1</span></span>
<span><span class="co">## 133:  0.01851852      0     0     2     2     0   0.0             1</span></span>
<span><span class="co">## 134:  0.01851852      0     0     2     2     0   0.0             1</span></span>
<span><span class="co">##      sites_absent</span></span>
<span><span class="co">##             &lt;num&gt;</span></span>
<span><span class="co">##   1:           58</span></span>
<span><span class="co">##   2:           61</span></span>
<span><span class="co">##   3:           74</span></span>
<span><span class="co">##   4:           84</span></span>
<span><span class="co">##   5:           86</span></span>
<span><span class="co">##  ---             </span></span>
<span><span class="co">## 130:          107</span></span>
<span><span class="co">## 131:          107</span></span>
<span><span class="co">## 132:          107</span></span>
<span><span class="co">## 133:          107</span></span>
<span><span class="co">## 134:          107</span></span></code></pre>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nathan Roe.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
