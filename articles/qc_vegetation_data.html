<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>QC vegetation data • ecositer</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="QC vegetation data">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ecositer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/accessing_vegetation_data.html">Accessing vegetation data</a></li>
    <li><a class="dropdown-item" href="../articles/ordinating_vegetation_data.html">Vegetation data ordination</a></li>
    <li><a class="dropdown-item" href="../articles/qc_vegetation_data.html">QC vegetation data</a></li>
    <li><a class="dropdown-item" href="../articles/summarizing_ecological_data.html">Summarizing ecological data</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/natearoe/ecositer/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<link href="qc_vegetation_data_files/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="qc_vegetation_data_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><link href="qc_vegetation_data_files/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="qc_vegetation_data_files/leaflet-1.3.1/leaflet.js"></script><link href="qc_vegetation_data_files/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="qc_vegetation_data_files/proj4-2.6.2/proj4.min.js"></script><script src="qc_vegetation_data_files/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="qc_vegetation_data_files/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="qc_vegetation_data_files/leaflet-binding-2.2.2/leaflet.js"></script><script src="qc_vegetation_data_files/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js"></script><script src="qc_vegetation_data_files/leaflet-providers-plugin-2.2.2/leaflet-providers-plugin.js"></script><script src="qc_vegetation_data_files/HomeButton-0.0.1/home-button.js"></script><script src="qc_vegetation_data_files/HomeButton-0.0.1/easy-button-src.min.js"></script><link href="qc_vegetation_data_files/Ribes-CSS-0.0.1/Ribes_home-button.css" rel="stylesheet">
<script src="qc_vegetation_data_files/clipboard-0.0.1/setClipboardText.js"></script><link href="qc_vegetation_data_files/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet">
<link href="qc_vegetation_data_files/mapviewCSS-0.0.1/mapview.css" rel="stylesheet">
<link href="qc_vegetation_data_files/Ribes%20cereum-CSS-0.0.1/Ribes%20cereum_home-button.css" rel="stylesheet">
<link href="qc_vegetation_data_files/Ribes%20lasianthum-CSS-0.0.1/Ribes%20lasianthum_home-button.css" rel="stylesheet">
<link href="qc_vegetation_data_files/Ribes%20montigenum-CSS-0.0.1/Ribes%20montigenum_home-button.css" rel="stylesheet">
<link href="qc_vegetation_data_files/Ribes%20nevadense-CSS-0.0.1/Ribes%20nevadense_home-button.css" rel="stylesheet">
<link href="qc_vegetation_data_files/Ribes%20roezlii-CSS-0.0.1/Ribes%20roezlii_home-button.css" rel="stylesheet">
<link href="qc_vegetation_data_files/Ribes%20roezlii%20var.%20roezlii-CSS-0.0.1/Ribes%20roezlii%20var.%20roezlii_home-button.css" rel="stylesheet">
<link href="qc_vegetation_data_files/Ribes%20velutinum-CSS-0.0.1/Ribes%20velutinum_home-button.css" rel="stylesheet">
<link href="qc_vegetation_data_files/Ribes%20viscosissimum-CSS-0.0.1/Ribes%20viscosissimum_home-button.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>QC vegetation data</h1>
                        <h4 data-toc-skip class="author">Nathan Roe</h4>
            
            <h4 data-toc-skip class="date">2024-12-11</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/natearoe/ecositer/blob/main/vignettes/qc_vegetation_data.Rmd" class="external-link"><code>vignettes/qc_vegetation_data.Rmd</code></a></small>
      <div class="d-none name"><code>qc_vegetation_data.Rmd</code></div>
    </div>

    
    
<p>library</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span></code></pre></div>
<p><strong>About</strong></p>
<p><code>ecositer</code> has a category of functions used for QC, all of
which use a “QC_” prefix. Vegetation data stored in NASIS requires QC.
There are numerous issues that exist caused by different data vintages,
data origins, varying data quality, duplication caused by KSSL lab
pedons, outdated plant taxonomies, and more. This vignette discusses a
best practice methodology for QC NASIS vegetation data.</p>
<p>You should start your QC process by removing data at the coarsest
level that meets your objectives. This will ensure that you do not spend
time fixing obscure edge cases that are ultimately removed.</p>
<p>To begin with, we are going to build our dataset:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">D104_veg</span> <span class="op">&lt;-</span> <span class="fu">ecositer</span><span class="fu">::</span><span class="fu"><a href="../reference/create_veg_df.html">create_veg_df</a></span><span class="op">(</span>from <span class="op">=</span> <span class="st">"web_report"</span>,</span>
<span>                                 ecositeid <span class="op">=</span> <span class="st">"F022AD104CA"</span><span class="op">)</span></span></code></pre></div>
<p><strong>Choose the best vegetation plot for site</strong></p>
<p>Sites may have multiple vegetation plots with differing data
qualities. If there are multiple vegetation plots associated with a
site, <code><a href="../reference/QC_best_vegplot_for_site.html">QC_best_vegplot_for_site()</a></code> chooses the vegetation
plot with the most records.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">D104_veg_best</span> <span class="op">&lt;-</span> <span class="fu">ecositer</span><span class="fu">::</span><span class="fu"><a href="../reference/QC_best_vegplot_for_site.html">QC_best_vegplot_for_site</a></span><span class="op">(</span>veg_df <span class="op">=</span> <span class="va">D104_veg</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning -&gt; There are sites with multiple vegetation plots. Reviewing these sites is preferable to automated selection. To view which sites have multiple vegetation plots:</span></span>
<span><span class="co">##               'Your veg_df' |&gt; dplyr::group_by(siteiid) |&gt;</span></span>
<span><span class="co">##                                dplyr::summarise(unique_vegplots = dplyr::n_distinct(vegplotiid)) |&gt;</span></span>
<span><span class="co">##                                dplyr::filter(unique_vegplots &gt; 1)</span></span></code></pre>
<p>To look at all the sites with multiple vegetation plots:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">D104_multi_veg</span> <span class="op">&lt;-</span> <span class="va">D104_veg</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">siteiid</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>unique_vegplots <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/n_distinct.html" class="external-link">n_distinct</a></span><span class="op">(</span><span class="va">vegplotiid</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>has_multiple_vegplots <span class="op">=</span> <span class="va">unique_vegplots</span> <span class="op">&gt;</span> <span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">has_multiple_vegplots</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">D104_multi_veg</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 6 × 3</span></span></span>
<span><span class="co">##   siteiid unique_vegplots has_multiple_vegplots</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>                </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> 1146902               2 TRUE                 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> 1169814               2 TRUE                 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> 1169819               2 TRUE                 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> 1169825               2 TRUE                 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span> 1169826               2 TRUE                 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">6</span> 1169880               2 TRUE</span></span></code></pre>
<p><strong>Creating an aggregated abundance column</strong></p>
<p>Now, we are going to create an aggregated abundance column called,
“pct_cover”. There are four columns where abundance data could be
stored: akstratumcoverclasspct, speciescancovpct, speciescomppct,
understorygrcovpct. A couple of functions will be used to inspect what
abundance columns are used in your dataset and whether any records in
your dataset have multiple abundance columns used.</p>
<p><code><a href="../reference/QC_aggregate_abundance.html">QC_aggregate_abundance()</a></code> aggregates the four abundance
columns into the new “pct_cover” column. If any records have multiple
abundance columns used, this function will average them and issue a
warning or error depending on the <code>fail_on_dup</code> argument. For
details on this function - <code>?QC_aggregate_abundance()</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">D104_veg_agg</span> <span class="op">&lt;-</span> <span class="fu">ecositer</span><span class="fu">::</span><span class="fu"><a href="../reference/QC_aggregate_abundance.html">QC_aggregate_abundance</a></span><span class="op">(</span>veg_df <span class="op">=</span> <span class="va">D104_veg_best</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning in ecositer::QC_aggregate_abundance(veg_df = D104_veg_best): Multiple</span></span>
<span><span class="co">## abundance columns are used in this dataset: akstratumcoverclasspct,</span></span>
<span><span class="co">## speciescancovpct</span></span></code></pre>
<p>Note the two warnings above. As mentioned in the warning,
<code><a href="../reference/QC_find_multiple_abundance.html">QC_find_multiple_abundance()</a></code> will allow you to inspect
which records have abundance data in multiple columns. These should be
inspected to determine why multiple abundance columns are used. The
other warning shows that two total abundance columns were used in this
dataset.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">abund_dups</span> <span class="op">&lt;-</span> <span class="fu">ecositer</span><span class="fu">::</span><span class="fu"><a href="../reference/QC_find_multiple_abundance.html">QC_find_multiple_abundance</a></span><span class="op">(</span>veg_df <span class="op">=</span> <span class="va">D104_veg_best</span><span class="op">)</span></span>
<span><span class="va">abund_dups</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1] siteiid                   usiteid                  </span></span>
<span><span class="co">##  [3] siteobsiid                vegplotid                </span></span>
<span><span class="co">##  [5] vegplotiid                primarydatacollector     </span></span>
<span><span class="co">##  [7] vegdataorigin             ecositeid                </span></span>
<span><span class="co">##  [9] ecositenm                 ecostateid               </span></span>
<span><span class="co">## [11] ecostatename              commphaseid              </span></span>
<span><span class="co">## [13] commphasename             cancovtotalpct           </span></span>
<span><span class="co">## [15] cancovtotalclass          overstorycancontotalpct  </span></span>
<span><span class="co">## [17] overstorycancovtotalclass plantsym                 </span></span>
<span><span class="co">## [19] plantsciname              plantnatvernm            </span></span>
<span><span class="co">## [21] akstratumcoverclasspct    speciescancovpct         </span></span>
<span><span class="co">## [23] speciescomppct            understorygrcovpct       </span></span>
<span><span class="co">## [25] speciestraceamtflag       vegetationstratalevel    </span></span>
<span><span class="co">## [27] akstratumcoverclass       plantheightcllowerlimit  </span></span>
<span><span class="co">## [29] plantheightclupperlimit   planttypegroup           </span></span>
<span><span class="co">## [31] horizdatnm                utmzone                  </span></span>
<span><span class="co">## [33] utmeasting                utmnorthing              </span></span>
<span><span class="co">## [35] latdegrees                latminutes               </span></span>
<span><span class="co">## [37] latseconds                latdir                   </span></span>
<span><span class="co">## [39] longdegrees               longminutes              </span></span>
<span><span class="co">## [41] longseconds               longdir                  </span></span>
<span><span class="co">## [43] latstDD                   longstDD                 </span></span>
<span><span class="co">## &lt;0 rows&gt; (or 0-length row.names)</span></span></code></pre>
<p><strong>Choosing coordinate format</strong></p>
<p>The NASIS site table has several possible columns where location data
can be populated. The three categories are UTM; lat/long degrees,
minutes, seconds (DMS), and lat/long decimal degrees.
<code><a href="../reference/QC_location_data.html">QC_location_data()</a></code> reports what percent of the required
columns are populated for each of these three categories and prompts the
user to specify which category of coordinate format they would like to
use. By default, <code>coordinate_format = NULL</code>, this function is
interactive. I recommend using it that way. Alternatively, users can
specify the desired coordinate format using the
<code>coordinate_format</code> argument. This option is used here
because it performs better in an Rmarkdown document.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">D104_veg_agg</span> <span class="op">&lt;-</span> <span class="fu">ecositer</span><span class="fu">::</span><span class="fu"><a href="../reference/QC_location_data.html">QC_location_data</a></span><span class="op">(</span>veg_df <span class="op">=</span> <span class="va">D104_veg_agg</span>,</span>
<span>                                           coordinate_format <span class="op">=</span> <span class="st">"DD"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Note -&gt; UTM has 35.2907961603614% completeness</span></span></code></pre>
<pre><code><span><span class="co">## Note -&gt; Lat/long DMS has 35.2907961603614% completeness</span></span></code></pre>
<pre><code><span><span class="co">## Note -&gt; Standardized Lat/long DD has 100% completeness. These columns in NASIS imply WGS84 datum is used,</span></span>
<span><span class="co">##                   therefore datum column is not inspected.</span></span></code></pre>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># test2 &lt;- ecositer::QC_location_data(veg_df = D104_veg_agg,</span></span>
<span><span class="co">#                                     coordinate_format = "DD")</span></span></code></pre></div>
<p><strong>Assign minimum criteria for vegetation data
quality</strong></p>
<p>Now that we have an aggregated abundance column, we can begin with
our coarse filter of the data. First we will use
<code><a href="../reference/QC_veg_completeness.html">QC_veg_completeness()</a></code> to describe the completeness and
quality of vegplot observations.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ecositer</span><span class="fu">::</span><span class="fu"><a href="../reference/QC_veg_completeness.html">QC_veg_completeness</a></span><span class="op">(</span>veg_df <span class="op">=</span> <span class="va">D104_veg_agg</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   siteiid siteobsiid vegplotiid primarydatacollector           vegdataorigin</span></span>
<span><span class="co">## 1 1093611    1069569     277250                      site existing veg table</span></span>
<span><span class="co">## 2  968053     950512     958427                   DE        spreadsheet form</span></span>
<span><span class="co">## 3  888801     864161     954378                                             </span></span>
<span><span class="co">## 4  949201     922060     958629                   DE        spreadsheet form</span></span>
<span><span class="co">## 5  949204     922063     276227                      site existing veg table</span></span>
<span><span class="co">## 6  949214     922073     958642                 DESK        spreadsheet form</span></span>
<span><span class="co">##   total_records unique_species percent_to_species percent_with_abund</span></span>
<span><span class="co">## 1             3              3          100.00000                  0</span></span>
<span><span class="co">## 2            17             16           52.94118                100</span></span>
<span><span class="co">## 3             1              1            0.00000                  0</span></span>
<span><span class="co">## 4            16             12           68.75000                100</span></span>
<span><span class="co">## 5             8              8          100.00000                100</span></span>
<span><span class="co">## 6            18              9           72.22222                100</span></span></code></pre>
<p>Next, we can remove plots that do not meet a minimum threshold for
data quality and completeness. The threshold should be specific to your
data set and study area.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">D104_veg_agg</span> <span class="op">&lt;-</span> <span class="fu">ecositer</span><span class="fu">::</span><span class="fu"><a href="../reference/QC_completeness_criteria.html">QC_completeness_criteria</a></span><span class="op">(</span>veg_df <span class="op">=</span> <span class="va">D104_veg_agg</span>,</span>
<span>                                   min_unique_species <span class="op">=</span> <span class="fl">5</span>,</span>
<span>                                   min_perc_to_species <span class="op">=</span> <span class="fl">60</span>,</span>
<span>                                   min_perc_with_abund <span class="op">=</span> <span class="fl">80</span><span class="op">)</span></span></code></pre></div>
<p><strong>Update taxonomy using USDA PLANTS</strong> NASIS allows plant
taxonomies to be used that are not up-to-date. This function
cross-references the taxonomies in your dataset to see if there is an
updated taxonomy in the USDA PLANTS database. If there is, it updates
the taxonomy and provides a message notifying you of the changes
made.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">D104_veg_agg</span> <span class="op">&lt;-</span> <span class="fu">ecositer</span><span class="fu">::</span><span class="fu"><a href="../reference/QC_update_taxonomy.html">QC_update_taxonomy</a></span><span class="op">(</span>veg_df <span class="op">=</span> <span class="va">D104_veg_agg</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Note -&gt; The following taxonomical changes have been made.</span></span></code></pre>
<pre><code><span><span class="co">## Pinus latifolia changed to Pinus engelmannii</span></span></code></pre>
<p><strong>Unify taxonomies, where possible</strong> Often times, a
dataset has taxonomies that can be unified. Examples include records
where species were identified to subspecies or variety when other
observations were recorded to species. Sometimes, such a distinction is
meaningful, other times it is not. Additionally, sometimes during field
data collection, observations are recorded to genus and it is possible
to determine species at a later date.</p>
<p>For statistical reasons, taxonomies should be unified where possible.
Statistical analyses, including multivariate distance measure (which are
essential tools for analysis of ecological communities), do not
recognize similarities between taxa. Observations that share the same
species (i.e., differ at the subspecies or variety level) are not
recognized to have any relationship in most statistical analyses. For
this reason, unifying taxa is important. In extreme cases, you may even
consider unifying species within a genus, if for example there are
limited observations of one species (i.e., it would be removed from the
analysis due to lack of observations) and it occupies a very similar
niche to another species in the genus. The question is whether unifying
creates more signal-to-noise or less. This process requires careful
consideration and expert knowledge.</p>
<p><code>ecositer::QC_unifying_taxa</code> returns a dataframe of taxa
to QC for unification and the number of observations there are of each
taxa. The rules for this function are: an observation to species level
&amp; an observation beyond species level (e.g., subspecies, variety)
within the same species OR an observation to genus level and an
observation to species within the same genus.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ecositer</span><span class="fu">::</span><span class="fu"><a href="../reference/QC_unify_taxa.html">QC_unify_taxa</a></span><span class="op">(</span>veg_df <span class="op">=</span> <span class="va">D104_veg_agg</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                                plantsciname occurences</span></span>
<span><span class="co">##                                      &lt;char&gt;      &lt;int&gt;</span></span>
<span><span class="co">## 1:                          Abies magnifica         54</span></span>
<span><span class="co">## 2:          Abies magnifica var. shastensis         15</span></span>
<span><span class="co">## 3:                              Achnatherum         12</span></span>
<span><span class="co">## 4:                  Achnatherum occidentale          3</span></span>
<span><span class="co">## 5: Achnatherum occidentale ssp. occidentale          2</span></span>
<span><span class="co">## 6:   Achnatherum occidentale ssp. pubescens          1</span></span></code></pre>
<p>Another taxonomic consideration - within this package, observations
to genus will be removed from statistical analyses. Genus is too
variable to produce meaningful results. Consider the genus, Pinus. In
California, Pinus sabiniana (foothill pine) grows nearly to sea-level.
Pinus albicaulis (whitebark pine) grows up to tree-line. Observations to
Pinus, in a dataset like the Sequoia and Kings Canyon National Park Soil
Survey, could theoretically be foothill pine or whitebark pine, and this
creatse far too much variability in that class to be meaningful.</p>
<p>Looking at the result above, we see Achnatherum occidentale has one
observation. There are 9 observations to the genus, Achnatherum. If you
thought that the genus Achnatherum was consistent enough for your
analysis (e.g., similar species-site relationships), such that using
Achnatherum at the genus level would create more signal-to-noise that
all observations of Achnatherum being omitted, you could change these
observations to ‘Achnatherum spp.’ and they would be included in
analyses.</p>
<p>Change Achnatherum occidentale to Achnatherum</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># define columns to be changed </span></span>
<span><span class="va">columns_to_update</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"plantsym"</span>, <span class="st">"plantsciname"</span>, <span class="st">"plantnatvernm"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">new_values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ACHNA"</span>, <span class="st">"Achnatherum"</span>, <span class="st">"needlegrass"</span><span class="op">)</span> <span class="co"># plantsym = ACHNA, plantsciname = Achnatherum, plantnatvernm = needlegrass</span></span>
<span></span>
<span><span class="co"># make changes</span></span>
<span><span class="va">D104_veg_agg</span><span class="op">[</span><span class="va">D104_veg_agg</span><span class="op">$</span><span class="va">plantsciname</span> <span class="op">==</span> <span class="st">"Achnatherum occidentale"</span> <span class="op">&amp;</span> </span>
<span>               <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">D104_veg_agg</span><span class="op">$</span><span class="va">plantsciname</span><span class="op">)</span>, <span class="va">columns_to_update</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="va">new_values</span><span class="op">)</span></span></code></pre></div>
<p>Change Achnatherum to Achnatherum spp.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">D104_veg_agg</span><span class="op">$</span><span class="va">plantsciname</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"Achnatherum"</span>,</span>
<span>                                  replacement <span class="op">=</span> <span class="st">"Achnatherum spp."</span>,</span>
<span>                                  x <span class="op">=</span> <span class="va">D104_veg_agg</span><span class="op">$</span><span class="va">plantsciname</span><span class="op">)</span></span></code></pre></div>
<p>An additional tool that can be useful for unifying species is looking
at the distribution of taxa.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ecositerSpatial</span><span class="fu">::</span><span class="fu"><a href="https://natearoe.github.io/ecositer/reference/mapping_taxon.html">mapping_taxon</a></span><span class="op">(</span>veg_df <span class="op">=</span> <span class="va">D104_veg_agg</span>,</span>
<span>                               taxon <span class="op">=</span> <span class="st">"Ribes"</span>,</span>
<span>                               x <span class="op">=</span> <span class="st">"longstDD"</span>,</span>
<span>                               y <span class="op">=</span> <span class="st">"latstDD"</span>,</span>
<span>                               EPSG <span class="op">=</span> <span class="st">"EPSG:4326"</span><span class="op">)</span></span></code></pre></div>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron","CartoDB.Positron","CartoDB.Positron",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["CartoDB.DarkMatter","CartoDB.DarkMatter","CartoDB.DarkMatter",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenStreetMap","OpenStreetMap","OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["Esri.WorldImagery","Esri.WorldImagery","Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenTopoMap","OpenTopoMap","OpenTopoMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["point",440]},{"method":"addCircleMarkers","args":[[36.5552409,36.418375,36.731681,36.719324,36.651591,36.46981,36.45937,36.45636,36.47583,36.60262],[-118.6298374,-118.4296028,-118.9384443,-118.901796,-118.841606,-118.6505,-118.6292,-118.6186,-118.6068,-118.7259],6,null,"Ribes",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"point","stroke":true,"color":"#333333","weight":1,"opacity":0.9,"fill":true,"fillColor":"#E41A1C","fillOpacity":0.6},null,null,["<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>8&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>2015CA7921093&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>21&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>2016CA7925018N&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>23&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>2019CA7925026&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>25&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>2019CA7925030&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>26&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>2019CA7925035&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>35&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>V2002CA107054&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>38&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>V2002CA107103&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>39&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>V2002CA107110&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>48&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>V2003CA107301&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>55&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>V2003CA107713&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>"],{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},["8","21","23","25","26","35","38","39","48","55"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addHomeButton","args":[-118.9384443,36.418375,-118.4296028,36.731681,true,"Ribes","Zoom to Ribes","<strong> Ribes <\/strong>","bottomright"]},{"method":"addLegend","args":[{"colors":["#E41A1C"],"labels":["Ribes"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"Ribes"}]},{"method":"addCircleMarkers","args":[[36.7773861,36.5653611,36.4277249,36.4379156,36.36798,36.44028,36.4787,36.47752,36.38491,36.47909,36.51783],[-118.6955028,-118.6127361,-118.409802,-118.4085743,-118.3949,-118.4133,-118.6752,-118.6708,-118.7011,-118.6706,-118.6545],6,null,"Ribes cereum",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"point","stroke":true,"color":"#333333","weight":1,"opacity":0.9,"fill":true,"fillColor":"#377EB8","fillOpacity":0.6},null,null,["<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>3&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>2014CA7925044&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes cereum&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>16&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>2015CA7925086N&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes cereum&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>19&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>2016CA7922005&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes cereum&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>20&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>2016CA7923007&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes cereum&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>29&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>V2001CA107087&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes cereum&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>30&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>V2001CA107107&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes cereum&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>32&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>V2002CA107040&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes cereum&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>34&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>V2002CA107041&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes cereum&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>41&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>V2002CA107624&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes cereum&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>42&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>V2003CA107214&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes cereum&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>45&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>V2003CA107245&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes cereum&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>"],{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},["3","16","19","20","29","30","32","34","41","42","45"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addHomeButton","args":[-118.7011,36.36798,-118.3949,36.7773861,true,"Ribes cereum","Zoom to Ribes cereum","<strong> Ribes cereum <\/strong>","bottomright"]},{"method":"addLegend","args":[{"colors":["#377EB8"],"labels":["Ribes cereum"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"Ribes cereum"}]},{"method":"addCircleMarkers","args":[36.32029,-118.5709,6,null,"Ribes lasianthum",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"point","stroke":true,"color":"#333333","weight":1,"opacity":0.9,"fill":true,"fillColor":"#4DAF4A","fillOpacity":0.6},null,null,"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>27&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>V2000CA107018&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes lasianthum&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>",{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},"27",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addHomeButton","args":[-118.5709,36.32029,-118.5709,36.32029,true,"Ribes lasianthum","Zoom to Ribes lasianthum","<strong> Ribes lasianthum <\/strong>","bottomright"]},{"method":"addLegend","args":[{"colors":["#4DAF4A"],"labels":["Ribes lasianthum"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"Ribes lasianthum"}]},{"method":"addCircleMarkers","args":[[36.5568528,36.4328132,36.7107806,36.51233],[-118.6284583,-118.4090703,-118.8933778,-118.6542],6,null,"Ribes montigenum",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"point","stroke":true,"color":"#333333","weight":1,"opacity":0.9,"fill":true,"fillColor":"#984EA3","fillOpacity":0.6},null,null,["<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>15&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>2015CA7925080&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes montigenum&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>18&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>2016CA7922003&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes montigenum&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>22&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>2017CA7925013&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes montigenum&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>43&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>V2003CA107242&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes montigenum&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>"],{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},["15","18","22","43"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addHomeButton","args":[-118.8933778,36.4328132,-118.4090703,36.7107806,true,"Ribes montigenum","Zoom to Ribes montigenum","<strong> Ribes montigenum <\/strong>","bottomright"]},{"method":"addLegend","args":[{"colors":["#984EA3"],"labels":["Ribes montigenum"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"Ribes montigenum"}]},{"method":"addCircleMarkers","args":[[36.6169223,36.740468,36.6098609,36.5653611,36.44038,36.47256,36.44811,36.44477],[-118.7888004,-118.947346,-118.7102901,-118.6127361,-118.4127,-118.6457,-118.4623,-118.459],6,null,"Ribes nevadense",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"point","stroke":true,"color":"#333333","weight":1,"opacity":0.9,"fill":true,"fillColor":"#FF7F00","fillOpacity":0.6},null,null,["<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>5&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>2015CA7921029&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes nevadense&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>11&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>2015CA7925004&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes nevadense&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>13&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>2015CA7925037&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes nevadense&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>17&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>2015CA7925086N&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes nevadense&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>28&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>V2001CA107077&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes nevadense&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>36&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>V2002CA107055&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes nevadense&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>50&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>V2003CA107476&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes nevadense&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>51&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>V2003CA107477&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes nevadense&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>"],{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},["5","11","13","17","28","36","50","51"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addHomeButton","args":[-118.947346,36.44038,-118.4127,36.740468,true,"Ribes nevadense","Zoom to Ribes nevadense","<strong> Ribes nevadense <\/strong>","bottomright"]},{"method":"addLegend","args":[{"colors":["#FF7F00"],"labels":["Ribes nevadense"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"Ribes nevadense"}]},{"method":"addCircleMarkers","args":[[36.778022,36.6169223,36.611136,36.6046806,36.740468,36.6098609],[-118.53475,-118.7888004,-118.7083533,-118.7534694,-118.947346,-118.7102901],6,null,"Ribes roezlii",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"point","stroke":true,"color":"#333333","weight":1,"opacity":0.9,"fill":true,"fillColor":"#FFFF33","fillOpacity":0.6},null,null,["<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>1&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>2014CA7921011&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes roezlii&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>6&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>2015CA7921029&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes roezlii&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>7&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>2015CA7921040&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes roezlii&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>10&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>2015CA7923039&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes roezlii&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>12&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>2015CA7925004&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes roezlii&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>14&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>2015CA7925037&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes roezlii&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>"],{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},["1","6","7","10","12","14"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addHomeButton","args":[-118.947346,36.6046806,-118.53475,36.778022,true,"Ribes roezlii","Zoom to Ribes roezlii","<strong> Ribes roezlii <\/strong>","bottomright"]},{"method":"addLegend","args":[{"colors":["#FFFF33"],"labels":["Ribes roezlii"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"Ribes roezlii"}]},{"method":"addCircleMarkers","args":[[36.731681,36.47256,36.41781,36.51625,36.51752,36.61542,36.60724,36.61441],[-118.9384443,-118.6457,-118.6845,-118.6564,-118.652,-118.7967,-118.7953,-118.7864],6,null,"Ribes roezlii var. roezlii",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"point","stroke":true,"color":"#333333","weight":1,"opacity":0.9,"fill":true,"fillColor":"#A65628","fillOpacity":0.6},null,null,["<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>24&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>2019CA7925026&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes roezlii var. roezlii&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>37&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>V2002CA107055&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes roezlii var. roezlii&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>40&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>V2002CA107480&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes roezlii var. roezlii&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>44&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>V2003CA107244&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes roezlii var. roezlii&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>46&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>V2003CA107246&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes roezlii var. roezlii&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>52&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>V2003CA107678&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes roezlii var. roezlii&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>53&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>V2003CA107680&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes roezlii var. roezlii&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>54&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>V2003CA107703&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes roezlii var. roezlii&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>"],{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},["24","37","40","44","46","52","53","54"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addHomeButton","args":[-118.9384443,36.41781,-118.6457,36.731681,true,"Ribes roezlii var. roezlii","Zoom to Ribes roezlii var. roezlii","<strong> Ribes roezlii var. roezlii <\/strong>","bottomright"]},{"method":"addLegend","args":[{"colors":["#A65628"],"labels":["Ribes roezlii var. roezlii"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"Ribes roezlii var. roezlii"}]},{"method":"addCircleMarkers","args":[36.48118,-118.4031,6,null,"Ribes velutinum",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"point","stroke":true,"color":"#333333","weight":1,"opacity":0.9,"fill":true,"fillColor":"#F781BF","fillOpacity":0.6},null,null,"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>31&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>V2001CA107108&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes velutinum&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>",{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},"31",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addHomeButton","args":[-118.4031,36.48118,-118.4031,36.48118,true,"Ribes velutinum","Zoom to Ribes velutinum","<strong> Ribes velutinum <\/strong>","bottomright"]},{"method":"addLegend","args":[{"colors":["#F781BF"],"labels":["Ribes velutinum"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"Ribes velutinum"}]},{"method":"addCircleMarkers","args":[[36.3358806,36.3478722,36.6270694,36.4787,36.51752,36.47583],[-118.709,-118.6898389,-118.8037194,-118.6752,-118.652,-118.6068],6,null,"Ribes viscosissimum",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"point","stroke":true,"color":"#333333","weight":1,"opacity":0.9,"fill":true,"fillColor":"#999999","fillOpacity":0.6},null,null,["<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>2&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>2014CA7925040&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes viscosissimum&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>4&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>2014CA7925069&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes viscosissimum&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>9&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>2015CA7923027&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes viscosissimum&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>33&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>V2002CA107040&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes viscosissimum&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>47&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>V2003CA107246&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes viscosissimum&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>49&emsp;<\/td><\/tr><tr><td>1<\/td><th>vegplotid&emsp;<\/th><td>V2003CA107301&emsp;<\/td><\/tr><tr><td>2<\/td><th>plantsciname&emsp;<\/th><td>Ribes viscosissimum&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>"],{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},["2","4","9","33","47","49"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addHomeButton","args":[-118.8037194,36.3358806,-118.6068,36.6270694,true,"Ribes viscosissimum","Zoom to Ribes viscosissimum","<strong> Ribes viscosissimum <\/strong>","bottomright"]},{"method":"addLayersControl","args":[["CartoDB.Positron","CartoDB.DarkMatter","OpenStreetMap","Esri.WorldImagery","OpenTopoMap"],["Ribes","Ribes cereum","Ribes lasianthum","Ribes montigenum","Ribes nevadense","Ribes roezlii","Ribes roezlii var. roezlii","Ribes velutinum","Ribes viscosissimum"],{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addLegend","args":[{"colors":["#999999"],"labels":["Ribes viscosissimum"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"Ribes viscosissimum"}]},{"method":"addHomeButton","args":[-118.947346,36.32029,-118.3949,36.778022,true,null,"Zoom to full extent","<strong>Zoom full<\/strong>","bottomleft"]}],"limits":{"lat":[36.418375,36.731681],"lng":[-118.9384443,-118.4296028]},"fitBounds":[36.32029,-118.947346,36.778022,-118.3949,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\"position\":\"relative\",\"bottomleft\":\"0px\",\"background-color\":\"rgba(255, 255, 255, 0.7)\",\"box-shadow\":\"0 0 2px #bbb\",\"background-clip\":\"padding-box\",\"margin\":\"0\",\"padding-left\":\"5px\",\"padding-right\":\"5px\",\"color\":\"#333\",\"font-size\":\"9px\",\"font-family\":\"\\\"Helvetica Neue\\\", Arial, Helvetica, sans-serif\",\"text-align\":\"left\",\"z-index\":\"700\"});\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script></main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nathan Roe.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
